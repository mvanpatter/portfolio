(function(){require(["https://static.teamtreehouse.com/assets/workspaces/extensions/snapshot_workspace/html/snapshot_action.html-4fab30a2aea14bcdf5fb53abcb67c036.js","https://static.teamtreehouse.com/assets/workspaces/extensions/fork_workspace/html/fork_action.html-836599cc40f7794326a696611ac384a1.js"],function(e,t){var s,r,a;return s=require("utils/AppInit"),r=require("workspace-editor/workspace/Workspace"),a=function(e){return $("ul.util-actions").prepend(e)},s.htmlReady(function(){return a(t),a(e)})})}).call(this),function(){require(["https://static.teamtreehouse.com/assets/workspaces/extensions/snapshot_workspace/html/partials/snapshots.html-09124dab4608b6affe227fc39528bbe6.js","https://static.teamtreehouse.com/assets/workspaces/extensions/snapshot_workspace/html/partials/snapshot.html-486900e69c178550ccd5de846c624a49.js"],function(e,t){var s,r,a,n,o,i,c,u,l,p,d,h,f,m,k,w,g,v,_,b,q,E,y,j,T;return s=require("utils/AppInit"),r=require("utils/ExtensionUtils"),n=require("workspace-editor/workspace/Workspace"),a=5,r.addLinkedStyleSheet("https://static.teamtreehouse.com/assets/workspaces/extensions/snapshot_workspace/snapshot_workspace-523331e1aac0eb24486a3e82c1fc3fa4.css"),q=null,m=null,T=null,b=0,k={snapshots:e,snapshot:t},_=function(){return q=$("#snapshot-tab"),m=$(".snapshot-manager"),q.on("click",y),m.on("click",w),$("body").on("click",d),$("#create-snapshot").on("click",o)},g=function(){return m.find(".snapshot-item-delete").on("click",u),m.find(".snapshot-delete-cancel").on("click",p),m.find(".snapshot-delete-confirm").on("click",i)},w=function(e){return e.stopPropagation()},y=function(e){return m.closest(".util-dropdown").toggleClass("open"),!1},d=function(e){return m.closest(".util-dropdown").removeClass("open")},o=function(){var e;return e="/workspaces/"+T+"/snapshots",c(),$.ajax({url:e,type:"POST",dataType:"json",contentType:"application/json",processData:!1,success:f,error:function(e){return alert("There was a problem creating a snapshot for this workspace.")}})},f=function(){var e;return e="/workspaces/"+T+"/snapshots",$.ajax({url:e,type:"GET",dataType:"json",contentType:"application/json",processData:!1,success:function(e,t,s){return v(e)}})},i=function(e){var t,s;return t=$(e.target).data("snapshot-id"),s="/workspaces/"+T+"/snapshots/"+t,l(h(e.target)),$.ajax({url:s,type:"DELETE",dataType:"json",contentType:"application/json",processData:!1,success:f})},u=function(e){var t;return p(),t=$(e.target).parents(".snapshot-item"),t.find(".snapshot-delete").show(),null!=e?e.preventDefault():void 0},p=function(e){return $(".snapshot-delete").hide(),null!=e?e.preventDefault():void 0},c=function(){return $(".snapshot-create").show()},l=function(e){return e.find(".snapshot-delete-active").show()},h=function(e){return $(e).closest(".snapshot-item")},v=function(t){var s,r;return r={snapshots:t},b=t.length,j(),E(),s=Mustache.render(e,r,k),m.find(".snapshot-list").replaceWith(s),g()},j=function(){return m.find(".snapshot-count").html(b+" of "+a+" Snapshots taken")},E=function(){var e;return e=m.find("#create-snapshot"),b>=a?e.attr("disabled","disabled"):e.removeAttr("disabled")},s.appReady(function(){return T=n.getMetadata().hostedId,_(),v([]),f()})})}.call(this),function(){require(["https://static.teamtreehouse.com/assets/workspaces/extensions/fork_workspace/html/fork_dialog.html-973b70d6029884bf23663ba266f9e92d.js"],function(e){var t,s,r,a,n,o;return t=require("utils/AppInit"),s=require("widgets/Dialogs"),r=require("utils/ExtensionUtils"),a=require("workspace-editor/workspace/Workspace"),r.addLinkedStyleSheet("https://static.teamtreehouse.com/assets/workspaces/extensions/fork_workspace/fork_workspace-5688d70a4898f537a39dd2a9249b181a.css"),o=function(t){var r,o,i,c;return i=Mustache.render(e,a.getMetadata()),r=s.showModalDialogUsingTemplate(i),o=r.getElement(),c=o.find("#workspace-title-input"),r.done(function(e){var t,r;return e===s.DIALOG_BTN_OK?(t=null!=(r=a.getMetadata().hostedId)?r:a.getMetadata().id,n(c.val(),t)):void 0}),null!=t?t.preventDefault():void 0},n=function(e,t){var s;return s={workspace:{title:e,forked_workspace_id:t}},$.ajax({url:"/workspaces",type:"POST",dataType:"json",contentType:"application/json",processData:!1,data:JSON.stringify(s),success:function(e){return window.location="/workspaces/"+e.workspace.id},error:function(e){return alert("There was a problem forking this workspace.")}})},t.htmlReady(function(){var e;return $("#fork-tab").on("click",o),e=$("meta[name='csrf-token']").attr("content"),$.ajaxSetup({beforeSend:function(t){return t.setRequestHeader("X-CSRF-Token",e)}})})})}.call(this),function(){var e,t;e=require("editor/EditorManager"),t=require("utils/ExtensionUtils"),t.addLinkedStyleSheet("https://static.teamtreehouse.com/assets/workspaces/extensions/csharp_highlighting/csharp_highlighting-cbc514d5b4d79b8f2e3bb0919ab47619.css"),$(e).on("activeEditorChange",function(e,t,s){var r;return"csharp"===t.document.language.getId()?(r=$(t.getRootElement()),r.addClass("cm-s-visualstudio").removeClass("cm-s-light")):void 0})}.call(this),function(){require(["https://static.teamtreehouse.com/assets/workspaces/extensions/read_only_mode/html/read_only_dialog.html-00c74983320d690f4eb935db56115795.js"],function(e){var t,s,r,a,n,o,i;return r=require("widgets/Dialogs"),t=require("command/CommandManager"),s=require("command/Commands"),n=require("file/NativeFileError"),a=require("workspace-editor/project/ErrorHandler"),o=require("workspace-editor/workspace/Workspace"),i=function(){var a,n,i,c;return i=Mustache.render(e,o.getMetadata()),a=r.showModalDialogUsingTemplate(i),n=a.getElement(),c=n.find("#workspace-title-input"),a.done(function(e){return e===r.DIALOG_BTN_OK?t.execute(s.FORK_WORKSPACE,c.val(),o.getMetadata().id):void 0})},a.registerHandlerForError(n.NO_MODIFICATION_ALLOWED_ERR,i)})}.call(this),function(){require(["https://static.teamtreehouse.com/assets/workspaces/extensions/total_size_limit/html/size_limit_reached_dialog.html-afe08547e33c68a8e809a5acedfa8243.js"],function(e){var t,s,r,a,n,o,i,c,u,l,p;return t=require("utils/AppInit"),a=require("widgets/Dialogs"),s=require("command/CommandManager"),r=require("command/Commands"),o=require("file/NativeFileError"),n=require("workspace-editor/project/ErrorHandler"),u=require("workspace-editor/utils/filesize.min"),i=52428800,c={base:2,round:1},p=function(){var t;return t=Mustache.render(e,{sizeLimit:l(i),currentSize:l(brackets.fs.driver.currentFSSize)}),a.showModalDialogUsingTemplate(t)},n.registerHandlerForError(o.QUOTA_EXCEEDED_ERR,p),l=function(e){return u(e,c)},t.htmlReady(function(){return brackets.fs.driver.setMaxFSSize(i)})})}.call(this);